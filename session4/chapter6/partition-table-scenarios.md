## 6.4.2 TiDB 分区表使用场景

从业务角度看，在大数据量(至少过千万条)并且对表数据进行选择性查询的情况下，使用分区表的场景有：

* Range 分区用来解决业务大量删除数据带来的性能问题，支持快速删除分区。虽然 TiDB 4.0 事务限制放开，但是 DELETE 数据不如直接使用 TRUNCATE/DROP 分区表删除底层的 SST 文件高效。

* Hash 分区适用于大量写入场景下的数据打散，在一定程度上解决写热点问题。

* 对业务透明，避免分库分表。通过分区表的方式将数据分散到不同分区，在一定程度上提升 SQL 性能。

* 运维管理便利，可以单独维护具体分区。

* 典型场景举例：

    * 商业数据分析业务：经常有一些按时间实时写入广告的点击/曝光日志、用户账户实时消费报表、指标数据实时监控表的业务场景。因为数据量较大，TiDB 中可以选择保留一个月或者半年的记录，业务程序经常需要进行当天分时数据统计，对比上个月的当天，以及去年当天的数据。对于该需求，根据时间字段创建 Range 分区表，只需要访问 3 个分区数据就可以实现快速统计。

    * 审核业务：审核 Log 表用来统计分析每个审核人员的工作量，用作绩效等方面的参考。在 TiDB 中，只需要按天做 Range 分区就可以满足要求。

    * 基础信息业务：对于一些账户表，由于用户信息太庞大，并且没有明显可以分区的特征字段。可以根据表中 BIGINT 类型的 UID 字段做 Hash 分区，结合分区时配置的分区数量，把 UID 打散到不同的分区，从而提高查询的性能。需要注意：Hash 分区只能针对整数进行 Hash。
